2007-10-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/source_base.rb: Fixed cache support.

2007-10-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Don't update the search entry when a match
    is clicked in the match sidepane.

2007-10-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: The source was not closed
    after using it.

2007-10-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/edict_file.rb: Fixed crash when a word in kana is
    entered.

2007-10-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/net/dict.rb: Don't use the dotted line as the end of
    definition marker. This is more reliable.

2007-10-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/net/dict.rb: Handles the case when no strategies are
    available.

2007-10-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/utils.rb: Fixed String#kana? so that a string containing
    both hiragana and katakana returns true. Added String#japanese?.
    * lib/fantasdic/sources/edict_file.rb: Added a new source to look up words
    in an EDICT file. The implementation uses egrep for performance. A pure
    Ruby implementation needs be added for cases when egrep isn't available.
    See http://www.csse.monash.edu.au/~jwb/j_edict.html for more information
    about EDICT.
    * po/POTFILES.in: Added edict_file.rb.

2007-10-19 Mathieu Blondel <mblondel@svn.gnome.org>

    * post-clean.rb: Added files that need to be cleaned.

2007-10-19 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/pre-setup.rb: Don't copy .svn dirs.

2007-10-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb: Method "available_strategies"
    should not depend on method "available_databases".

2007-10-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * po/POTFILES.in: Added lib/fantasdic/source_base.rb.

2007-10-14 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/utils.rb: Added String#latin?, String#kana?, String#kanji?
    and File::which helpers.
    * lib/fantasdic/sources/dict_server.rb: Removed useless attr_accessors and
    moved vbox internal spacing...
    * lib/fantasdic/source_base.rb:... here. Fixed a comment.

2007-10-13 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade: "gtk-help" must not be
    translatable (bug of glade3, file edited manually).
    * data/fantasdic/glade/preferences_dialog.glade: Ditto.
    * po/POTFILES.in: Add lib/fantasdic/ui/browser.rb to the list of files.

2007-10-13 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/command_line.rb: Following the new API.

2007-10-13 Mathieu Blondel <mblondel@svn.gnome.org>

    * tools/dict-proxy.rb:
    * tools/edict2dictd.rb:
    * tools/epwing2dictd.rb:
    * tools/jmdict2dictd.rb:
    * tools/tanakacorpus2dictd.rb:
    * tools/dict-server.rb:
    * tools/stardict2dictd.rb:
    * tools/jmnedict2dictd.rb:
    * tools/kanjidic22dictd.rb:
    * tools/dictfmt.rb:
    * win32/gen_po.rb:
    * win32/fantasdic.c:
    * lib/fantasdic/ui.rb:
    * lib/fantasdic/utils.rb:
    * lib/fantasdic/preferences.rb:
    * lib/fantasdic/sources/dict_server.rb:
    * lib/fantasdic/sources/google_translate.rb:
    * lib/fantasdic/gettext.rb:
    * lib/fantasdic/net/dict.rb:
    * lib/fantasdic/command_line.rb:
    * lib/fantasdic/source_base.rb:
    * lib/fantasdic/ui/preferences_dialog.rb:
    * lib/fantasdic/ui/utils.rb:
    * lib/fantasdic/ui/browser.rb:
    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/alert_dialog.rb:
    * lib/fantasdic/ui/glade_base.rb:
    * lib/fantasdic/ui/about_dialog.rb:
    * lib/fantasdic/ui/combobox_entry.rb:
    * lib/fantasdic/ui/matches_listview.rb:
    * lib/fantasdic/ui/ipc.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    * lib/fantasdic/ui/print.rb:
    * lib/fantasdic.rb:
    * bin/pre-setup.rb:
    * COPYRIGHT:
    * COPYING:
    * data/fantasdic/ui/toolbar.xml:
    * data/fantasdic/ui/popups.xml:
    * data/fantasdic/ui/menus.xml: Fixes FSF's address in headers.

2007-10-13 Mathieu Blondel <mblondel@svn.gnome.org>

    * po/POTFILES.in: Add lib/fantasdic/sources/dict_server.rb and
    lib/fantasdic/sources/google_translate.rb to the list.

2007-10-13 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/source_base.rb: Added class method default_strategy. It
    can be overridden by source plugin. Added convert_to_utf8 private method.
    Added disable_search_all_databases and no_databases fields.

    * lib/fantasdic/ui/main_app.rb: Don't add "define" but add default source
    defined by source plugin instead.

    * lib/fantasdic/sources/google_translate.rb: Translate using Google
    Translate.
      
    * lib/fantasdic/ui/combobox_entry.rb: Slice too long words in the history.

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Use default_strategy instead
    of "define". Sensitize databases as needed.

    * data/fantasdic/glade/add_dictionary_dialog.glade: Move horizontal
    separators to sel_db_vbox.

2007-10-09 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Don't crash if no plugin
    found.

2007-10-07 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Display more useful messages
    than just "Fields missing" when fields are missing.
    * lib/fantasdic/sources/dict_server.rb: Ditto.    

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/source_base.rb: Introducing open and close methods. They
    will be useful for plugins that need to open and close streams. Introducing
    connecting_to_source_str and transferring_data_str methods. This allows
    source plugins to override the status bar messages.

    * lib/fantasdic/sources/dict_server.rb: Following above changes
    * lib/fantasdic/ui/main_app.rb: Ditto.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Ditto.

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Fixes bug when source plugin doesn't exist
    anymore.

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb: "available_strategies" now returns a
    hash. Follow this change.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Ditto.
    * lib/fantasdic/source_base.rb: Documents methods which should be overridden
    by source classes.   

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade: Uses "about" icon
    rather than "information" for the button next to the source combobox.

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: When editing an existing
    dictionary, "search selected databases" was selected although there weren't
    selected databases.

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Remember config widget.

2007-10-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade: About source plugin
    button. Hopefully this should encourage more developers to write source
    plugins :).
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Code to show the about dialog.
    * lib/fantasdic/sources/dict_server.rb: Updates plugin metadata.
    * lib/fantasdic/source_base.rb: More possible metadata.
    * lib/fantasdic/ui/preferences_dialog.rb: Makes dialog modal.
    
    * lib/fantasdic/ui/about_dialog.rb: Removes unused variable, adds a useful
    comment.

2007-10-04 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Crashed when server was not
    reachable (exception not properly caught).

2007-10-04 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/net/dict.rb: Cache methods moved to source_base.rb. This
    way, any source plugin can benefit from the cache system.

    * lib/fantasdic/sources/dict_server.rb:
    * lib/fantasdic/source_base.rb: Better separation of UI and non UI.
    Implements define and match methods.

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Follow above changes.
    
    * lib/fantasdic/ui/main_app.rb: Multiple backends support. Overall it seems
    to work fine but it needs further testing.

2007-10-03 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb:
    * lib/fantasdic/source_base.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Pass parent dialog and
    on_databases_updated callback to config_widget instead of constructor.

2007-10-02 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb: Ensures that database list has not
    been updated already when focus-out-event is triggered. Generates the
    config widget on config_widget, not on initialize.

2007-09-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Fixed a bug which prevented
    existing dictionaries from being updated.

2007-09-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: Fixed a bug which prevented
    the databases list from being displayed in some cases.

2007-09-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/sources/dict_server.rb: Initialize data after initializing
    signals.

2007-09-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/source_base.rb: Beginning of multiple source backends
    support... This works like a plugin system. Source::Base is a base class for
    dictionary sources. It also keeps a list of available sources. Sources can
    be system-wide (e.g. /usr/lib/ruby/1.8/fantasdic/sources/) or user-wide
    ($HOME/.fantasdic/sources/). All sources should extend this class.
    * lib/fantasdic/sources/dict_server.rb: DICT server source. All source code
    which was specific to DICT was moved here.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Multiple backend support.
    main_app.rb still needs be modified!
    * data/fantasdic/glade/add_dictionary_dialog.glade: Ditto.
    * lib/fantasdic.rb: Include lib/fantasdic/source_base.rb.
    * data/fantasdic/glade/server_infos_dialog.glade: Some minor tweaks.

2007-09-23 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * lib/fantasdic/ui/print.rb:
    * data/fantasdic/glade/add_dictionary_dialog.glade: Restore default fonts
    button.

2007-09-22 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/preferences_dialog.glade: UI tweaks regarding the
    proxy tab.

2007-09-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade: Some UI tweaks.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Likewise.

2007-09-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * AUTHORS: Changed my email address.
    * ChangeLog: Likewise.
    * HACKING: Likewise.
    * lib/fantasdic.rb: Likewise.
    * data/omf/fantasdic/fantasdic-fr.omf: Likewise.
    * data/omf/fantasdic/fantasdic-C.omf: Likewise.
    * data/gnome/help/fantasdic/C/fantasdic.xml: Likewise.
    * data/gnome/help/fantasdic/AUTHORS: Likewise.
    * data/gnome/help/fantasdic/fr/fr.po: Likewise.
    * data/gnome/help/fantasdic/ChangeLog: Likewise.
    * MAINTAINERS: Likewise.
    * po/fr.po: Likewise.
    * po/AUTHORS: Likewise.
    * po/ChangeLog: Likewise.

2007-09-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/preferences_dialog.rb:
    * lib/fantasdic/ui/utils.rb:
    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    * lib/fantasdic/ui/print.rb:
    * data/fantasdic/glade/add_dictionary_dialog.glade:
    * data/fantasdic/glade/preferences_dialog.glade:
    Per dictionary font preferences.

2007-09-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/preferences_dialog.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * data/fantasdic/glade/add_dictionary_dialog.glade:
    * data/fantasdic/glade/preferences_dialog.glade:
    Connects signals from the Ruby files instead of defining functions callbacks
    in the Glade files.

2007-09-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb: SUPPORTS_STATUS_ICON and SUPPORTS_PRINT renamed to
    HAVE_STATUS_ICON and HAVE_PRINT.
    * lib/fantasdic/ui/preferences_dialog.rb: Likewise.
    * lib/fantasdic/ui/main_app.rb: Likewise.

2007-09-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb: Makes Fantasdic a GNOME application if possible,
    otherwise uses GTK.

    * lib/fantasdic/ui/browser.rb: Added. Takes care of opening the browser
    (if possible default browser) in a portable way. Takes care of opening
    help. Uses GNOME's help system when  possible, open HTML documentation in a
    browser otherwise.
    * lib/fantasdic/preferences.rb: Browser code removed and moved to above
    file.

    * data/fantasdic/glade/preferences_dialog.glade: Adds help button.
    * data/fantasdic/glade/add_dictionary_dialog.glade: Likewise.
    * lib/fantasdic/ui/preferences_dialog.rb: Opens help when help button
    clicked.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Likewise.

    * data/fantasdic/ui/menus.xml: Adds a menu item to user manuel in help menu.
    * lib/fantasdic/ui/main_app.rb: Opens help when above menu item is clicked.
      
    * lib/fantasdic/pre-setup.rb: Generates documenters.rb out of
    data/gnome/help/fantasdic/AUTHORS.
    * lib/fantasdic.rb: Tries to load documenters.rb.
    * lib/fantasdic/ui/about_dialog.rb: Displays documenters.   

    * data/omf/fantasdic/fantasdic-C.omf: OMF metadata for English doc.
    * data/omf/fantasdic/fantasdic-fr.omf: Same for French.
    * data/omf/fantasdic/post-install.rb: Run scrollkeeper-update. Caution, for
    distributions using binary packages, this should be done at the package
    level.
    * data/omf/fantasdic/pre-setup.rb: Replacing path to OMF files.

    * data/gnome/help/fantasdic/C/figures/fantasdic.png:
    * data/gnome/help/fantasdic/C/figures/fantasdic-search.png:
    * data/gnome/help/fantasdic/C/figures/fantasdic-find-text.png:
    Figures in English.
    * data/gnome/help/fantasdic/C/fantasdic.xml: Master user documentation.
    This is for now largely inspired by gnome-dictionary's documentation. Some
    areas are not complete yet because they're going to change soon.
    * data/gnome/help/fantasdic/fr/fr.po: French translation.
    * data/gnome/help/fantasdic/fr/figures/fantasdic.png:
    * data/gnome/help/fantasdic/fr/figures/fantasdic-search.png:
    * data/gnome/help/fantasdic/fr/figures/fantasdic-find-text.png:
    Figures in French.

    * data/gnome/help/fantasdic/ChangeLog: ChangeLog aimed to documenters.
    * data/gnome/help/fantasdic/README: Useful commands for generating HTML,
    merging .po files, etc.
    * data/gnome/help/fantasdic/AUTHORS: Documenters.
    * data/pre-setup.rb: Copies figures for HTML documentation too.

    * make_release.sh: Merges documentation .po files back to XML files.
    Generates HTML out of Docbook XML.

2007-09-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Disable save if no definition found.

2007-09-15 Mathieu Blondel <mblondel@svn.gnome.org>

    * fantasdic.desktop: "Application" is not a valid category.
    See http://standards.freedesktop.org/menu-spec/1.0/apa.html.

2007-09-14 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Disable printing if no definition found.

2007-09-10 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/preferences.rb (open_url): Doesn't take the command as
    paramater anymore, call get_browser directly instead. Returns true if
    succedded. Uses Windows OLE on Windows in order to open url in default
    browser.
    * lib/fantasdic/ui/main_app.rb: Show the url in error dialog when
    cannot open browser.
    * lib/fantasdic/ui/about_dialog.rb: Likewise.

2007-09-08 Mathieu Blondel <mblondel@svn.gnome.org>

    * release 1.0-beta4

2007-09-08 Mathieu Blondel <mblondel@svn.gnome.org>

    * README: Updated for upcoming release.
    * NEWS: Likewise.

2007-09-08 Mathieu Blondel <mblondel@svn.gnome.org>

    * win32/fantasdic.c: Move fantasdic/, GTK/, ruby/, ruby-gettext/, 
    ruby-gtk2/ and win32-pipe/ to a new dir lib/ in order to hide them from the
    user.
    * win32/README: Update instructions to follow this change.

2007-09-04 Mathieu Blondel <mblondel@svn.gnome.org>

    * TODO: Updated with new ideas.

2007-09-02 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic.rb: intltool doesn't recognize _('...'). Use double quotes.

2007-09-02 Mathieu Blondel <mblondel@svn.gnome.org>

    * fantasdic.desktop: Fantasdic should always be described as a "dictionary
    application". "DICT client" doesn't make sense for most people...
    * lib/fantasdic.rb: Likewise.

2007-09-01 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/preferences_dialog.rb: Use the hide method instead of
    destroy. It seems to workaround some GC-related bug in RG2.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Likewise.

2007-09-01 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/preferences.rb: Handles the case when the config file is
    blank or malformed.

2007-08-31 Mathieu Blondel <mblondel@svn.gnome.org>

    * THANKS: Added :).

2007-08-31 Mathieu Blondel <mblondel@svn.gnome.org>

    * pre-setup.rb: Don't act differently on Windows.
    * win32/: Added. This directory will be used for all the win32 stuff which
    obviously can't go to lib/.
    * win32/gen_po.rb: Added. This file generates the .mo files and must be run
    from win32/.
    * win32/fantasdic.c: Added. Run the ruby interpreter in a sub process and
    hide the command pop-up window.
    * win32/README: Instructions to help prepare an archive which contains all
    the dependencies including Ruby and GTK. This is heavy but my experience
    shows that you can't expect people to install Ruby and GTK separately...
    * lib/fantasdic/pre-setup.rb: Don't fail if run outside setup.rb.
    * bin/pre-setup.rb: Don't generate the .bat file anymore.

2007-08-31 Mathieu Blondel <mblondel@svn.gnome.org>

    * MAINTAINERS: Added to follow GNOME's policy.

2007-08-31 Mathieu Blondel <mblondel@svn.gnome.org>

    * make_release.sh: Delete .tmp files.

2007-08-31 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/icons/fantasdic.svg: New master icon, based on two icons
    from the Tango project.
    * data/fantasdic/icons/fantasdic_32x32.png: Added for convenience.
    * data/fantasdic/icons/fantasdic_24x24.png: Likewise.
    * data/fantasdic/icons/fantasdic_48x48.ico: Likewise.
    * data/fantasdic/icons/fantasdic_16x16.png: Likewise.
    * data/fantasdic/icons/fantasdic_22x22.ico: Likewise.
    * data/fantasdic/icons/fantasdic_32x32.ico: Likewise.
    * data/fantasdic/icons/fantasdic_small.png: Likewise.
    * data/fantasdic/icons/fantasdic_24x24.ico: Likewise.
    * data/fantasdic/icons/fantasdic_16x16.ico: Likewise.
    * data/fantasdic/icons/fantasdic_22x22.png: Likewise.
    * data/fantasdic/icons/fantasdic_48x48.png: Likewise.
    * lib/fantasdic/ui/main_app.rb: Applied the necessary changes.
    * lib/fantasdic/ui/preferences_dialog.rb: Likewise.
    * lib/fantasdic/ui/about_dialog.rb: Added icon.
    * data/fantasdic/icons/fantasdic_small.png: Deleted.

2007-08-22 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/ipc.rb: There are cases when Win32::Pipe doesn't seem to
    like strings returned by Marshal.dump so let's use Base64.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * README: updated with newest features.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/net/dict.rb: Fixed bug when db provided to show_db doesn't
    exist.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Authenticate for show_server
    and show_db if login and password provided.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * AUTHORS: Translators names moved...
    * po/AUTHORS: ...here.
    * po/README: Ask translators to add their name to po/AUTHORS.
    * lib/fantasdic/pre-setup.rb: Generate lib/fantasdic/authors.rb and
    lib/fantasdic/translators.rb from AUTHORS and po/AUTHORS. This way, authors
    and translators names are centralized in one place.
    * lib/fantasdic/ui/about_dialog.rb: Display translators for relevant locale
    only.
    * lib/fantasdic.rb: Try to load lib/fantasdic/authors.rb and
    lib/fantasdic/translators.rb if present.
    * data/fantasdic/glade/preferences_dialog.glade: Increase a little bit page
    width.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Trim leading and ending spaces in the
    searched word.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/utils.rb: Added Gtk::TreeModel#n_rows alias.
    * lib/fantasdic/ui/main_app.rb: Display the number of matches in the
    treeview instead of the total number of matches.
    * data/fantasdic/glade/main_app.glade: Sets "Matches" as the default string
    for the sidepane.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Make the ResultTextView grab the focus when
    definitions are added.

2007-08-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Some code cleanup (kill_lookup_thread).

2007-08-19 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic.rb: Added a HAVE_CONSOLE constant. This constant must be
    used to check that the console is available because rubyw can't use stdout,
    stderr, stdin.
    * bin/pre-setup.rb: Don't require gettext here but in lib/fantasdic.rb
    instead.

2007-08-19 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/ipc.rb: Moved IPC::send and IPC::find to IPC::Instance
    module. It makes more sense to use this namespace.
    * lib/fantasdic/ui.rb: Applied the necessary modifications to follow above
    change.
    * lib/fantasdic/ui/main_app.rb: Likewise.

2007-08-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/ipc.rb: Added an IPC backend using win32 named pipes
    thanks to win32/pipe from the win32-utils package. Three backends are
    now available:

    - Named pipes. This uses win32/pipe from the win32-utils package. This
    approach is preferred on win32.
    - DRb (Distributed Ruby). This approach is portable but its main
    disadvantage is that it may be blocked by the local firewall.
    - X11. This works by creating an invisible window, setting a uniquely named
    atom on the root window which refers to the invisible window (so other
    instances can find the window) and watching for property change events
    on the invisible window. This approach is preferred on Unix.

2007-08-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb: Renamed "win" variable to "instance". IPC now
    supported by window.
    * lib/fantasdic/ui/main_app.rb: IPC::Window renamed to IPC::Instance.
    * lib/fantasdic/ui/ipc.rb: Simple IPC mechanism using DRb (Distributed
    Ruby). This mechanism is used for Windows. IPC using X11 is kept for the
    rest. This allows to make Fantasdic a single-instance program on Windows
    too.

2007-08-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * pre-setup.rb: Don't fail if there's a problem with a .po file. Just
    display a warning.

2007-08-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic.rb: New WIN32 constant.
    * lib/fantasdic/ui.rb: Use this constant.
    * lib/fantasdic/preferences.rb: Use this constant.
    * bin/pre-setup.rb: Don't use uname -a on Win32, don't hardcode ruby path
    for generating fantasdic.bat.

2007-08-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/about_dialog.rb: Forgot to include GetText.

2007-08-17 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: When a link is clicked, search all
    databases selected instead of the database the link belong to. This makes
    more sense since Fantasdic uses the concept of "virtual" dictionary.

2007-08-17 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/print.rb: Fixed a bug in the checking that last page is 
    not blank.

2007-08-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/dict.rb: Moved to lib/fantasdic/net/dict.rb.
    * lib/fantasdic/net/sockssocket.rb: SOCKS 5 library by Ryota Tokiwa.
    The library was imported to the source tree for convenience.
    * lib/fantasdic/ui/preferences_dialog.rb: Proxy tab.
    * lib/fantasdic/ui/main_app.rb: Load proxy. Don't crash if connection was
    closed by server.
    * lib/fantasdic.rb: includes.
    * data/fantasdic/glade/preferences_dialog.glade: Proxy tab.

2007-08-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/preferences_dialog.rb:
    * lib/fantasdic/ui/main_app.rb:
    * data/fantasdic/config/default.yaml:
    * data/fantasdic/glade/preferences_dialog.glade:
    Added dont_show_at_startup option. This option is going to be useful for
    users who want Fantasdic to be started when the computer boots.

2007-08-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Clear history menu item.
    * data/fantasdic/ui/menus.xml: Likewise.

2007-08-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/dict.rb: A server is now identified uniquely with four
    elements: host, port, login and password.
    * lib/fantasdic/ui/main_app.rb: Support auth.
    * lib/fantasdic/ui/add_dictionary_dialog.rb: Update database list if auth
    provided: an authenticated user may get more databases.
    * data/fantasdic/glade/add_dictionary_dialog.glade: Support auth.

2007-08-15 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/dict.rb: Added strategies description.

2007-08-15 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb: Require new files lib/fantasdic/ui/combobox_entry.rb
    and lib/fantasdic/ui/matches_listview.rb, remove
    lib/fantasdic/ui/history_list_view.rb.
    * lib/fantasdic/ui/history_list_view.rb: Deleted.
    * lib/fantasdic/ui/combobox_entry.rb: Added. History moved here.
    * lib/fantasdic/ui/matches_listview.rb: Added. Matches results moved here.
    * lib/fantasdic/utils.rb: Utils to use Arrays as queues.
    * lib/fantasdic/ui/preferences_dialog.rb: Adds a dictionary icon to the
    "dictionaries" tab.
    * lib/fantasdic/ui/main_app.rb: History now uses a ComboBoxEntry and
    matches are listed in a TreeView. This seems to be much more convenient. 
    Yay!
    * lib/fantasdic/ui/add_dictionary_dialog.rb: The combobox to select the
    default strategy of a dictionary was removed. Instead, the last selected
    strategy is saved for each dictionary before the application quits.
    * lib/fantasdic/ui/result_text_view.rb: Fixes a problem when links are
    wrapped.
    * data/fantasdic/config/default.yaml: Set "define" as the default strategy.
    * data/fantasdic/glade/main_app.glade: Updated to include the combobox and
    the matches list.
    * data/fantasdic/glade/add_dictionary_dialog.glade: Added fancy icons to
    tabs.
    * data/fantasdic/glade/preferences_dialog.glade: Likewise.
    * data/fantasdic/ui/toolbar.xml: Added "print" and "save" to the toolbar.
    * data/fantasdic/ui/popups.xml: Removed the clear history pop-up.
    * data/fantasdic/ui/menus.xml: Replaced History by MatchesSidepane.

2007-08-11 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/preferences.rb: Some code to detect which browser to use.
    * data/fantasdic/ui/menus.xml: Added a "submit bug report" menu item.
    * lib/fantasdic/ui/main_app.rb: Ditto.
    * lib/fantasdic/ui/about_dialog.rb: Make the URL clickable.
    * lib/fantasdic.rb: Added BUGZILLA_REPORT_BUG constant.

2007-08-10 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Load/Save PageSetup and PrintSetting from/to
    user preferences file.

2007-08-07 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/ui/menus.xml: Changed menu items order.

    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    When one character is selected in the textview, it is now possible to
    "zoom over it" when it is right-clicked. This is useful to see
    more clearly characters that would be too small otherwise (e.g. Chinese
    characters).

    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/about_dialog.rb: The close button in the about dialog
    didn't work for obscure reasons...

    * lib/fantasdic/dict.rb:
    * lib/fantasdic/ui/main_app.rb: Fixed a few problems when server is not
    available.

2007-08-06 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    Some code moved from main_app.rb to result_text_view.rb.

    * lib/fantasdic/dict.rb: Fixed a bug when the lookup thread is killed.
    * lib/fantasdic/ui/main_app.rb: Some UI tweaks.

    * lib/fantasdic/ui/preferences_dialog.rb: 
    * data/fantasdic/glade/preferences_dialog.glade: Added "fonts" options.

    * lib/fantasdic/ui/utils.rb: Moved Pango::Layout helpers there.

    * lib/fantasdic/ui/main_app.rb:
    * data/fantasdic/ui/menus.xml: Zoom+, Zoom- and Zoom normal buttons.
    
    * lib/fantasdic/ui/result_text_view.rb: Uses font from options.
    * lib/fantasdic/ui/print.rb: Uses font from options.

    * data/fantasdic/glade/add_dictionary_dialog.glade: Fixed typo.
    
    * po/POTFILES.in: Added print.rb.

2007-08-05 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/print.rb: Uses Pango::Layout::WRAP_WORD_CHAR instead of
    Pango::Layout::WRAP_CHAR.

    * lib/fantasdic/dict.rb:
    * lib/fantasdic/ui/main_app.rb:
    Move the code to hold connections from main_app.rb to dict.rb. This is to
    clean up main_app.rb (more coming).

    * lib/fantasdic/dict.rb:
    * lib/fantasdic/ui/main_app.rb:
    Move cache system from main_app.rb to dict.rb.

2007-08-02 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: Better spacing between definitions.

    * lib/fantasdic/ui/print.rb: Checks that last page is not blank; if a new
    page is started and previous page's last line was a title, move it to the
    next page; fixes spacing between definitions.

2007-08-01 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb: Requires print and some constants like SUPPORTS_IPC,
    SUPPORT_STATUS_ICON and SUPPORTS_PRINT.
    * lib/fantasdic/ui/print.rb: Added, pagination seems to work fine. It would
    be great to save the PageSetup and the PrintSettings in the config file.
    * lib/fantasdic/ui/main_app.rb: User interface.
    * data/fantasdic/ui/menus.xml: Menu entries.

    * TODO: Updated.

2007-07-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * release 1.0-beta3

2007-07-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui.rb:
    * lib/fantasdic/ui/preferences_dialog.rb:
    * lib/fantasdic/ui/main_app.rb:
    * data/fantasdic/ui/popups.xml:
    Switch to Gtk::StatusIcon.
    Hide window on "Escape".
    New button "search" in the status icon popup-menu.

    * lib/fantasdic/ui/result_text_view.rb: search from the beginning of the
    text buffer when a new string is entered.

2007-03-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * AUTHORS:
    * lib/fantasdic.rb:
    Updated translator list

2007-03-01 Mathieu Blondel <mblondel@svn.gnome.org>

    * tools/jmnedict2dictd.rb: Added JMnedict to dictd converter.

    * tools/jmdict2dictd.rb: Added JMdict to dictd converter.

    * tools/dictfmt.rb: Small fixes.

2007-02-28 Mathieu Blondel <mblondel@svn.gnome.org>

    * tools/dictfmt.rb: This class will be used instead of the dictfmt
    command line tool (shipped with dictd). Its main advantage is that it can
    associate more than one index entry with one definition. This is
    especially useful for japanese: a definition may be looked up in
    hiragana or kanji.

    * tools/kanjidic22dictd.rb: improved this converter using dictfmt.rb.

    * tools/edict2dictd.rb: use dictfmt.rb.

2007-01-28 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: save preferences when preferences dialog is
    closed. Preferences used to be saved when the application is closed only.
    In case of crash, dictionaries that had just been added were lost.

2006-12-05 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: looking up an empty string crashed Fantasdic

2006-12-04 Mathieu Blondel <mblondel@svn.gnome.org>

    * tools/epwing2dictd.rb: added EPWING to dictd format converter
    * tools/README: updated for epwing2dictd.rb

2006-11-30 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: pressing "escape" made Fantasdic crash

2006-11-21 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/config/default.yaml:
    * data/fantasdic/glade/preferences_dialog.glade:
    * lib/fantasdic/ui.rb:
    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/preferences_dialog.rb: new options "show fantasdic in
    tray" and "do not quit when main window is closed"

    * release 1.0-beta2


2006-11-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: also close scan_clipboard thread if needed
    * lib/fantasdic/ui/result_text_view.rb: remove marks when text buffer is
    cleared

    * fantasdic.sgml: docbook man page
    * make_release.sh: man page

    * fantasdic.desktop: fixed category and icon

    * lib/fantasdic/ui/main_app.rb: was displaying wrong message in status bar
    and close connection when a thread is killed.

2006-11-18 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/add_dictionary_dialog.rb: use focus-out-event
    * lib/fantasdic/ui/main_app.rb: close look up thread before quitting or
    when looking up a word while a thread is still alive

2006-11-17 Mathieu Blondel <mblondel@svn.gnome.org>

    * NEWS: preparing upcoming release 1.0-beta2
    * make_release.sh: upload packages

    * bin/pre-setup.rb: added bugzilla
    * lib/fantasdic.rb: added bugzilla and translators

2006-11-16 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade:
    * data/fantasdic/glade/server_infos_dialog.glade:
    * lib/fantasdic/command_line.rb:
    * lib/fantasdic/preferences.rb:
    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    * lib/fantasdic/ui/utils.rb: revamped add dictionary dialog. Split into two
    tabs, one for general informations, one for database selection.
    Database selection is now clearer since available databases and
    selected databases are separated. New status bar and greyed  window to give
    the user informations about what is happening. New "server informations"
    button. Double-click on a database row to get informations about it.

    * data/fantasdic/glade/main_app.glade:
    * data/fantasdic/ui/toolbar.xml:
    * lib/fantasdic/ui/add_dictionary_dialog.rb:
    * lib/fantasdic/ui/main_app.rb: removed the lookup button and put a combobox
    with available strategies instead. Again, give better indications to user
    as to what Fantasdic is doing. New stop button.

2006-11-15 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/preferences_dialog.glade:
    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/preferences_dialog.rb: new option so user can choose
     whether he or she wants Fantasdic to look up the last word at start up

    * README:
    * lib/fantasdic.rb:
    * lib/fantasdic/command_line.rb:
    * lib/fantasdic/ui.rb:
    * lib/fantasdic/ui/main_app.rb: new command line options. Fantasdic can be
    started with a dictionary and a word as parameters, if an instance of
    Fantasdic exists already, we use it, an option exists to print results to
    stdout (which makes Fantasdic a command-line dictionary too), the list of
    dictionaries in the settings as well as the strategies for a dictionary
    can now be listed.

    * lib/fantasdic/command_line.rb:
    * lib/fantasdic/ui/main_app.rb: basic authentication support (not tested)

2006-11-14 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: hold connections for some time and close
      too long connections.

    * lib/fantasdic/ui/main_app.rb:
    * lib/fantasdic/ui/result_text_view.rb:
    * data/fantasdic/ui/menus.xml:
    * data/fantasdic/glade/main_app.glade: a new find pane to find words inside
    the text view, a new save definition dialog, Edit > Copy, and 
    Edit > Select All.             

2006-06-25 Mathieu Blondel <mblondel@svn.gnome.org>

    * tools/: added dict-proxy.rb, dict-server.rb, edict2dictd.rb,
    kanjidic22dictd.rb, README, stardict2dictd.rb, tanakacorpus2dictd.rb

2006-06-22 Mathieu Blondel <mblondel@svn.gnome.org>

    * data/fantasdic/glade/add_dictionary_dialog.glade: made the treeview
    reorderable so that we can choose the sort order of definitions

2006-06-20 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/ui/main_app.rb: split lookup() into several functions and
    added support for "match:" prefix

2006-03-23 Mathieu Blondel <mblondel@svn.gnome.org>

    * lib/fantasdic/dict.rb: fixed bug which made Fantasdic crash 
    with some servers

2006-03-11 Mathieu Blondel <mblondel@svn.gnome.org>

    * Changelog: renamed to ChangeLog

2006-03-09 Mathieu Blondel <mblondel@svn.gnome.org>

    * po/Makefile: choose the ruby interpreter to run rgettext
    * lib/fantasdic/ui/main_app.rb: fixed a string
    * data/fantasdic/glade/main_app.glade: "look up" was not translatable

2006-03-05 Mathieu Blondel <mblondel@svn.gnome.org>

    * Made Ruby/Gettext optional

2006-02-19 Mathieu Blondel <mblondel@svn.gnome.org>

    * Some fixes to allow Fantasdic run under Windows
    * Some UI tweaks (glade files) (John Spray)
    * release 1.0-beta1.1

2006-02-17 Mathieu Blondel <mblondel@svn.gnome.org>

    * release 1.0-beta1
